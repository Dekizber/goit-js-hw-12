{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport default async function fetchImages(q, page, per_page) {\n    const response = await axios.get(`https://pixabay.com/api/`, {\n        params: {\n            key: '44997411-463a4997c6162e49e75a100fc',\n            q,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page,\n            per_page,\n        }\n    });\n    return response.data;\n};\n","const imageList = document.querySelector('.images-list');\nconst loaderEl = document.querySelector('.loader');\n\nexport const renderImages = (images) => {\n  const gallery = images.hits.map(({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads\n  }) => `<li class=\"images-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n          />\n          \n          <div class=\"property\">\n          <p><span class=\"weight\">Likes</span> ${likes}</p>\n          <p><span class=\"weight\">Views</span> ${views}</p>\n          <p><span class=\"weight\">Comments</span> ${comments}</p>\n          <p><span class=\"weight\">Downloads</span> ${downloads}</p>\n          </div>\n        </a>\n      </li>`).join('');\n\n\n  imageList.insertAdjacentHTML('beforeend', gallery);\n\n\n}\n\nexport const clearResult = () => imageList.innerHTML = '';\nexport const toggleLoader = (show = false) => {\n  if (show) return loaderEl.classList.add('loader-open');\n  loaderEl.classList.remove('loader-open');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport fetchImages from './js/pixabay-api';\nimport { clearResult, renderImages, toggleLoader } from \"./js/render-functions\";\n\n\nconst formEl = document.querySelector('#search_img');\nconst inputEl = document.querySelector('#search_img input');\nconst loadMoreBtn = document.querySelector('.loadBtn');\nconst cardEl = document.querySelector(\".images-list\");\n\nlet page;\nconst limit = 15;\nlet maxPages = 0;\nlet queryValue;\nconst gallery = new SimpleLightbox('.images-list a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nconst searchImg = () => {\n    queryValue = inputEl.value.trim();\n    formEl.reset();\n    loadMore();\n}\n\nconst onSubmit = (e) => {\n    e.preventDefault();\n    page = 0;\n    clearResult();\n    searchImg();\n}\n\nconst loadMore = async () => {\n    page += 1;\n    try {\n        toggleLoader(true);\n        const images = await fetchImages(queryValue, page, limit);\n        if (images.hits.length === 0) {\n            toggleLoader();\n            iziToast.warning({\n                title: 'Warning',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                color: 'red',\n                position: 'bottomRight',\n            });\n            return;\n        }\n        renderImages(images);\n        toggleLoader();\n        gallery.refresh();\n        maxPages = Math.ceil(images.totalHits / limit);\n        if (page >= maxPages) {\n            loadMoreBtn.classList.remove('loadBtn-open');\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color: 'yellow',\n                position: 'bottomCenter',\n            });\n        } else {\n            loadMoreBtn.classList.add('loadBtn-open');\n        }\n        if (page !== 1) {\n            const firstCard = cardEl.firstElementChild;\n            const firstCardHeight = firstCard.getBoundingClientRect().height;\n            scrollBy({\n                top: firstCardHeight * 2,\n                behavior: \"smooth\",\n            });\n        }\n    } catch (error) {\n        toggleLoader();\n        iziToast.error({\n            title: 'Error',\n            message: `Something went wrong: ${err.message}`,\n            color: 'red',\n            position: 'bottomRight',\n        });\n    }\n}\n\nconst onLoadMore = () => {\n    loadMore();\n}\n\nformEl.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n"],"names":["fetchImages","q","page","per_page","axios","imageList","loaderEl","renderImages","images","gallery","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearResult","toggleLoader","show","formEl","inputEl","loadMoreBtn","cardEl","limit","maxPages","queryValue","SimpleLightbox","searchImg","loadMore","onSubmit","e","iziToast","firstCardHeight","onLoadMore"],"mappings":"owBACe,eAAeA,EAAYC,EAAGC,EAAMC,EAAU,CAYzD,OAXiB,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAK,qCACL,EAAAH,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAAC,CACH,CACT,CAAK,GACe,IACpB,CCdA,MAAME,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAW,SAAS,cAAc,SAAS,EAEpCC,EAAgBC,GAAW,CACtC,MAAMC,EAAUD,EAAO,KAAK,IAAI,CAAC,CAC/B,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACJ,IAAQ;AAAA,wCACgCL,CAAa;AAAA;AAAA;AAAA,mBAGlCD,CAAY;AAAA,mBACZE,CAAI;AAAA;AAAA;AAAA;AAAA,iDAI0BC,CAAK;AAAA,iDACLC,CAAK;AAAA,oDACFC,CAAQ;AAAA,qDACPC,CAAS;AAAA;AAAA;AAAA,YAGlD,EAAE,KAAK,EAAE,EAGnBX,EAAU,mBAAmB,YAAaI,CAAO,CAGnD,EAEaQ,EAAc,IAAMZ,EAAU,UAAY,GAC1Ca,EAAe,CAACC,EAAO,KAAU,CAC5C,GAAIA,EAAM,OAAOb,EAAS,UAAU,IAAI,aAAa,EACrDA,EAAS,UAAU,OAAO,aAAa,CACzC,EC/BMc,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,mBAAmB,EACpDC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,cAAc,EAEpD,IAAIrB,EACJ,MAAMsB,EAAQ,GACd,IAAIC,EAAW,EACXC,EACJ,MAAMjB,EAAU,IAAIkB,EAAe,iBAAkB,CACjD,aAAc,MACd,aAAc,GAClB,CAAC,EACKC,EAAY,IAAM,CACpBF,EAAaL,EAAQ,MAAM,OAC3BD,EAAO,MAAK,EACZS,GACJ,EAEMC,EAAYC,GAAM,CACpBA,EAAE,eAAc,EAChB7B,EAAO,EACPe,IACAW,GACJ,EAEMC,EAAW,SAAY,CACzB3B,GAAQ,EACR,GAAI,CACAgB,EAAa,EAAI,EACjB,MAAMV,EAAS,MAAMR,EAAY0B,EAAYxB,EAAMsB,CAAK,EACxD,GAAIhB,EAAO,KAAK,SAAW,EAAG,CAC1BU,IACAc,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,2EACT,MAAO,MACP,SAAU,aAC1B,CAAa,EACD,MACH,CAeD,GAdAzB,EAAaC,CAAM,EACnBU,IACAT,EAAQ,QAAO,EACfgB,EAAW,KAAK,KAAKjB,EAAO,UAAYgB,CAAK,EACzCtB,GAAQuB,GACRH,EAAY,UAAU,OAAO,cAAc,EAC3CU,EAAS,KAAK,CACV,QAAS,6DACT,MAAO,SACP,SAAU,cAC1B,CAAa,GAEDV,EAAY,UAAU,IAAI,cAAc,EAExCpB,IAAS,EAAG,CAEZ,MAAM+B,EADYV,EAAO,kBACS,sBAAqB,EAAG,OAC1D,SAAS,CACL,IAAKU,EAAkB,EACvB,SAAU,QAC1B,CAAa,CACJ,CACJ,MAAe,CACZf,IACAc,EAAS,MAAM,CACX,MAAO,QACP,QAAS,yBAAyB,IAAI,OAAO,GAC7C,MAAO,MACP,SAAU,aACtB,CAAS,CACJ,CACL,EAEME,EAAa,IAAM,CACrBL,GACJ,EAEAT,EAAO,iBAAiB,SAAUU,CAAQ,EAC1CR,EAAY,iBAAiB,QAASY,CAAU"}